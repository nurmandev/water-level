<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap"
      rel="stylesheet"
    />

    <link rel="icon" href="/assets/logo/Logo_head.png" type="image/png" />

    <title>Water Tank Level</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <link
      rel="stylesheet"
      href="assets/bootstrap/bootstrap-icons/bootstrap-icons.css"
    />

    <link
      type="text/css"
      href="assets/bootstrap/bootstrap-css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="assets/css/screen.css" />

    <script
      type="text/javascript"
      href="assets/bootstrap/bootstrap-js/bootstrap.bundle.min.css"
      rel="stylesheet"
    ></script>
    <script type="module" src="assets/js/script.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.4.1/dist/chart.min.js"></script>

    <!-- Additional CSS Files -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="assets/css/templatemo-chain-app-dev.css" />
    <link rel="stylesheet" href="assets/css/animated.css" />
    <link rel="stylesheet" href="assets/css/owl.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js" defer></script>
  </head>
  <body>
    <!-- ***** Preloader Start ***** -->
    <div id="js-preloader" class="js-preloader">
      <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
    <!-- ***** Preloader End ***** -->

    <!-- ***** Header Area Start ***** -->
    <header
      class="header-area header-sticky wow slideInDown"
      data-wow-duration="0.75s"
      data-wow-delay="0s"
    >
      <div class="container">
        <div class="row">
          <div class="col-12">
            <nav class="main-nav">
              <!-- ***** Logo Start ***** -->
              <a href="index.html" class="logo">
                <span class="LOGO" id="navbar-logo">LOGO</span>
                <!-- <div class="LOGO" id="navbar-logo">LOGO</div> -->
              </a>
              <!-- ***** Logo End ***** -->
              <!-- ***** Menu Start ***** -->
              <ul class="nav">
                <li class="scroll-to-section">
                  <a href="#top" class="active">Home</a>
                </li>
                <li class="scroll-to-section">
                  <a href="#services">Services</a>
                </li>
                <li class="scroll-to-section"><a href="#about">About</a></li>
                <li class="scroll-to-section"><a href="#faq">FAQ</a></li>
                <li class="scroll-to-section">
                  <a href="#contact">Contact</a>
                </li>
                <li class="scroll-to-section">
                  <span id="navbar-username">Guest</span>
                </li>
              </ul>
              <a class="menu-trigger">
                <span>Menu</span>
              </a>
              <!-- ***** Menu End ***** -->
            </nav>
          </div>
        </div>
      </div>
    </header>
    <!-- ***** Header Area End ***** -->
    <div id="services" class="services section">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 offset-lg-2">
            <div
              class="section-heading wow fadeInDown"
              data-wow-duration="1s"
              data-wow-delay="0.5s"
            >
              <h2>Working <em>Tools</em></h2>
              <img src="assets/images/heading-line-dec.png" alt="" />
              <p>
                Water tank overflow is a common problem which leads to the
                wastage of water. Though there are many solutions to it like
                ball valves which automatically stop the water flow once the
                tank gets full.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="card-deck">
        <button>Users</button>
      </div>
    </div>
    <div class="container">
      <div class="card-deck">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Tank</h5>
            <div class="progress progress-bar-vertical">
              <div
                class="progress-bar progress-bar-danger bg-info progress-bar-striped progress-bar-animated"
                role="progressbar"
                aria-valuenow="0"
                aria-valuemin="0"
                aria-valuemax="100"
                id="tankProgress"
                style="height: 0%"
              >
                <div class="container">
                  <span class="sr-only" id="tankPercentage">0%</span>
                </div>
              </div>
            </div>
            <div class="container">
              <p id="distance">Tank is filled up for: 0%</p>
            </div>
            <div class="card-footer container">
              <small class="text-muted" id="status"
                >Status: Monitoring...</small
              >
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">History</h5>
            <canvas id="historyChart"></canvas>
          </div>
          <div class="card-footer">
            <small class="text-muted">Last updated # mins ago</small>
          </div>
        </div>
      </div>
    </div>

    <div id="about" class="services section">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 offset-lg-2">
            <div
              class="section-heading wow fadeInDown"
              data-wow-duration="1s"
              data-wow-delay="0.5s"
            >
              <h2>Project Team</h2>
              <img src="assets/images/heading-line-dec.png" alt="" />
              <p>Meet the team</p>

              <div class="team-members">
                <!-- ΝΕΡΩΝ -->
                <div class="member">
                  <img src="assets/members/neron.jpg" alt="Member 1" />
                  <h5>Bn Illihas</h5>
                  <p>Project Leader</p>
                  <div class="social-links">
                    <a href="https://github.com/" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                    <a href="https://www.linkedin.com/in/" target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </div>
                </div>
                <!-- ΚΩΝΣΤΑΝΤΙΝΟΣ -->
                <div class="member">
                  <img src="assets/members/konstantinos.jpg" alt="Member 2" />
                  <h5>IIiii</h5>
                  <p>Project Cordinator</p>
                  <div class="social-links">
                    <a href="https://github.com/" target="_blank"
                      ><i class="fab fa-github"></i
                    ></a>
                    <a href="https://www.linkedin.com/in/" target="_blank"
                      ><i class="fab fa-linkedin"></i
                    ></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="faq" class="pricing-tables">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 offset-lg-2">
            <div class="section-heading">
              <h2>Frequently Asked <em>Questions</em></h2>
              <img src="assets/images/heading-line-dec.png" alt="" />
              <p>
                Here are some frequently asked questions about the project, its
                setup, and operation, along with my answers.
              </p>
            </div>
          </div>

          <div class="faq-container">
            <div class="faq">
              <h3 class="faq-title">
                How does the water level indicator work?
              </h3>
              <p class="faq-text">
                The water level indicator operates using Emitter, which allows
                it to accurately detect water levels in tanks or reservoirs.
                Sensors are strategically placed at different levels, sending
                signals to the microcontroller, which then interprets and
                displays the water level information.
              </p>
              <button class="faq-toggle">
                <i class="fas fa-chevron-down"></i>
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="faq">
              <h3 class="faq-title">
                What types of tanks or containers is the water level indicator
                suitable for?
              </h3>
              <p class="faq-text">
                Our water level indicator is versatile and can be used in
                various types of tanks. It is adaptable to different shapes and
                sizes, making it suitable for residential, commercial, and
                industrial applications.
              </p>
              <button class="faq-toggle">
                <i class="fas fa-chevron-down"></i>
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="faq">
              <h3 class="faq-title">
                What are the benefits of using the water level indicator?
              </h3>
              <p class="faq-text">
                The water level indicator offers several benefits, including:
                <br />
                Efficient water management: Helps prevent water wastage by
                providing accurate real-time monitoring of water levels. <br />
                Convenience: Eliminates the need for manual checking of water
                levels, saving time and effort. <br />
                Prevents overflow or shortage: Alerts users when water levels
                are too high or too low, preventing potential damage or
                inconvenience. <br />
                Cost-effective: Promotes water conservation, leading to reduced
                water bills and operational costs.
              </p>
              <button class="faq-toggle">
                <i class="fas fa-chevron-down"></i>
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="faq">
              <h3 class="faq-title">
                Is the water level indicator easy to install and use?
              </h3>
              <p class="faq-text">
                Yes, the installation process is straightforward and
                user-friendly. We provide detailed instructions and support
                materials to guide you through the setup process. Once
                installed, the device operates automatically, requiring minimal
                maintenance. Our user manual offers step-by-step instructions
                for seamless operation.
              </p>
              <button class="faq-toggle">
                <i class="fas fa-chevron-down"></i>
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="faq">
              <h3 class="faq-title">
                Can the water level indicator be integrated with other systems
                or smart home devices?
              </h3>
              <p class="faq-text">
                Yes, our water level indicator is designed to be compatible with
                various smart home automation systems. It allowing for seamless
                monitoring and control of water levels remotely. Integration
                instructions and support are available upon request.
              </p>
              <button class="faq-toggle">
                <i class="fas fa-chevron-down"></i>
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="contact" class="pricing-tables">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 offset-lg-2">
            <div class="section-heading">
              <h4>Contact</h4>
              <img src="assets/images/heading-line-dec.png" alt="" />
              <p>
                Have questions or feedback? Please fill out this form to get in
                touch.
              </p>
            </div>
          </div>
          <div class="col-lg-6 offset-lg-3">
            <div class="formbold-main-wrapper">
              <!-- Author: FormBold Team -->
              <!-- Learn More: https://formbold.com -->
              <div class="formbold-form-wrapper">
                <form action="" method="POST">
                  <div class="formbold-mb-5">
                    <label for="name" class="formbold-form-label">
                      First Name
                    </label>
                    <input
                      type="text"
                      name="name"
                      id="name"
                      placeholder="first name"
                      class="formbold-form-input"
                    />
                  </div>

                  <div class="formbold-mb-5">
                    <label for="department" class="formbold-form-label">
                      Last Name
                    </label>
                    <input
                      type="department"
                      name="text"
                      id="department"
                      placeholder="last name"
                      class="formbold-form-input"
                    />
                  </div>

                  <div class="formbold-mb-5">
                    <label for="subject" class="formbold-form-label">
                      Subject
                    </label>
                    <input
                      type="text"
                      name="subject"
                      id="subject"
                      placeholder="subject"
                      class="formbold-form-input"
                    />
                  </div>

                  <div class="formbold-mb-5">
                    <label for="message" class="formbold-form-label">
                      Message
                    </label>
                    <textarea
                      rows="6"
                      name="message"
                      id="message"
                      placeholder="message"
                      class="formbold-form-input"
                    ></textarea>
                  </div>

                  <div>
                    <button type="submit" class="formbold-btn">
                      Contact us
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <div class="row contact flexbox">
          <div class="col-lg-3">
            <div class="footer-widget">
              <h4>Email Address</h4>
              <p>
                <a href="">me@gmail.com</a>
              </p>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="footer-widget">
              <h4>Pages</h4>
              <p><a href="#">Home</a></p>
              <p><a href="#">Services </a></p>
              <p><a href="#"> About </a></p>
              <p><a href="#">FAQ</a></p>
              <p><a href="#">Contact</a></p>
              <p><a href="" download>Acknowledgements</a></p>
            </div>
          </div>
          <div class="col-lg-3">
            <div class="footer-widget">
              <h4>Logo</h4>
              <div class="logo">
                <!-- <img src="assets/logo/Logo_head.png" alt="logo" /> -->
                LOGO
              </div>
              <div class="social">
                <a target="_blank" href="">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    style="fill: rgb(255, 255, 255)"
                  >
                    <circle cx="4.983" cy="5.009" r="2.188"></circle>
                    <path
                      d="M9.237 8.855v12.139h3.769v-6.003c0-1.584.298-3.118 2.262-3.118 1.937 0 1.961 1.811 1.961 3.218v5.904H21v-6.657c0-3.27-.704-5.783-4.526-5.783-1.835 0-3.065 1.007-3.568 1.96h-.051v-1.66H9.237zm-6.142 0H6.87v12.139H3.095z"
                    ></path>
                  </svg>
                </a>
                <a href="https://github.com/" target="_blank">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    style="fill: rgb(255, 255, 255)"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12.026 2c-5.509 0-9.974 4.465-9.974 9.974 0 4.406 2.857 8.145 6.821 9.465.499.09.679-.217.679-.481 0-.237-.008-.865-.011-1.696-2.775.602-3.361-1.338-3.361-1.338-.452-1.152-1.107-1.459-1.107-1.459-.905-.619.069-.605.069-.605 1.002.07 1.527 1.028 1.527 1.028.89 1.524 2.336 1.084 2.902.829.091-.645.351-1.085.635-1.334-2.214-.251-4.542-1.107-4.542-4.93 0-1.087.389-1.979 1.024-2.675-.101-.253-.446-1.268.099-2.64 0 0 .837-.269 2.742 1.021a9.582 9.582 0 0 1 2.496-.336 9.554 9.554 0 0 1 2.496.336c1.906-1.291 2.742-1.021 2.742-1.021.545 1.372.203 2.387.099 2.64.64.696 1.024 1.587 1.024 2.675 0 3.833-2.33 4.675-4.552 4.922.355.308.675.916.675 1.846 0 1.334-.012 2.41-.012 2.737 0 .267.178.577.687.479C19.146 20.115 22 16.379 22 11.974 22 6.465 17.535 2 12.026 2z"
                    ></path>
                  </svg>
                </a>
                <a href="" target="_blank">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    style="fill: rgb(255, 255, 255)"
                  >
                    <path
                      d="m18.73 5.41-1.28 1L12 10.46 6.55 6.37l-1.28-1A2 2 0 0 0 2 7.05v11.59A1.36 1.36 0 0 0 3.36 20h3.19v-7.72L12 16.37l5.45-4.09V20h3.19A1.36 1.36 0 0 0 22 18.64V7.05a2 2 0 0 0-3.27-1.64z"
                    ></path>
                  </svg>
                </a>
              </div>
            </div>
          </div>
          <div class="col-lg-12">
            <div class="copyright-text">
              <p>Copyright © 2024. All Rights Reserved.</p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- NEW CODE  -->
    <!-- Scripts -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/animation.js"></script>
    <script src="assets/js/imagesloaded.js"></script>
    <script src="assets/js/popup.js"></script>
    <script src="assets/js/custom.js"></script>
    <script src="assets/js/faq.js>"></script>

    <script>
      const toggles = document.querySelectorAll(".faq-toggle");

      toggles.forEach((toggle) => {
        toggle.addEventListener("click", () => {
          toggle.parentElement.classList.toggle("active");
        });
      });
    </script>

    <!-- NAVBAR -->
    <!-- <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("/api/user")
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("navbar-username").textContent =
              data.username;
          });
      });
    </script> -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("/api/user")
          .then((response) => response.json())
          .then((data) => {
            const username = data.username;
            document.getElementById("navbar-username").textContent = username;
            document.getElementById("navbar-logo").textContent =
              username !== "Guest" ? username : "LOGO";
          });
      });
    </script>
    <!-- MAIN CODE -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      let historyData = {
        labels: [],
        datasets: [
          {
            label: "Distance (cm)",
            data: [],
            borderColor: "rgba(75, 192, 192, 1)",
            borderWidth: 1,
            fill: false,
          },
        ],
      };

      let ctx = document.getElementById("historyChart").getContext("2d");
      let historyChart = new Chart(ctx, {
        type: "line",
        data: historyData,
        options: {
          scales: {
            yAxes: [
              {
                ticks: {
                  beginAtZero: true,
                },
              },
            ],
          },
        },
      });

      function fetchSensorData() {
        fetch("/sensor-data")
          .then((response) => response.json())
          .then((data) => {
            if (data && data.distance !== undefined) {
              let distance = data.distance;
              let percentage = Math.min(Math.max(distance, 0), 100);

              document.getElementById(
                "tankProgress"
              ).style.height = `${percentage}%`;
              document.getElementById(
                "tankPercentage"
              ).innerText = `${percentage}%`;
              document.getElementById(
                "distance"
              ).innerText = `Tank is filled up for: ${percentage}%`;

              let now = new Date();
              let timeString =
                now.getHours() +
                ":" +
                now.getMinutes() +
                ":" +
                now.getSeconds();
              historyData.labels.push(timeString);
              historyData.datasets[0].data.push(distance);

              if (historyData.labels.length > 10) {
                historyData.labels.shift();
                historyData.datasets[0].data.shift();
              }

              historyChart.update();
              document.getElementById(
                "lastUpdated"
              ).innerText = `Last updated ${now.getMinutes()} mins ago`;
            }
          })
          .catch((error) => {
            console.error("Error fetching sensor data:", error);
          });
      }

      setInterval(fetchSensorData, 5000); // Poll every 5 seconds
    </script>
  </body>
</html>
